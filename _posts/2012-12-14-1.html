---
layout: page
title: JavaScript常见的编码陷阱
---
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    <strong></strong>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    1.不必要的DOM操作
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    例如下面这段代码：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="comment" style="color:rgb(0,130,0)">//&nbsp;anti-pattern </span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">for</span>&nbsp;(<span class="keyword">var</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;100;&nbsp;i++){ &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">&nbsp;&nbsp;&nbsp;<span class="keyword">var</span>&nbsp;li&nbsp;=&nbsp;$(<span class="string">&quot;&lt;li&gt;&quot;</span>).html(<span class="string">&quot;This&nbsp;is&nbsp;list&nbsp;item&nbsp;#&quot;</span>&nbsp;+&nbsp;(i+1)); &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;$(<span class="string">&quot;#someUL&quot;</span>).append(li); &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    这段代码对DOM进行了100次修改，并且创建了100个不必要的jQuery对象。正确的做法是使用一个文档片段，或者创建一个字符串，把100个&lt;li&gt;元素赋给该字符串。然后附加到HTML中。这样就只需运行DOM一次，代码如下：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">var</span>&nbsp;liststring&nbsp;=&nbsp;<span class="string">&quot;&quot;</span>; &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">for</span>&nbsp;(<span class="keyword">var</span>&nbsp;i&nbsp;=&nbsp;100;&nbsp;i&nbsp;&gt;&nbsp;0;&nbsp;i--){ &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">&nbsp;&nbsp;&nbsp;liststring&nbsp;+=&nbsp;<span class="string">&quot;&lt;li&gt;This&nbsp;is&nbsp;list&nbsp;item&nbsp;#&quot;</span>&nbsp;+&nbsp;(99-&nbsp;i); &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">} &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">document.getElementById(<span class="string">&quot;someUL&quot;</span>).innerHTML(liststring);&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    正如上面所描述的一样，下面再提供一个方式，使用数组：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">var</span>&nbsp;liststring&nbsp;=&nbsp;<span class="string">&quot;&lt;li&gt;&quot;</span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">var</span>&nbsp;lis&nbsp;=&nbsp;[]; &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">for</span>&nbsp;(<span class="keyword">var</span>&nbsp;i&nbsp;=&nbsp;100;&nbsp;i&nbsp;&gt;&nbsp;0;&nbsp;i--){ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;lis.push(<span class="string">&quot;This&nbsp;is&nbsp;list&nbsp;item&nbsp;#&quot;</span>&nbsp;+&nbsp;(99-&nbsp;i)); &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">} &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">liststring&nbsp;+=&nbsp;lis.join(<span class="string">&quot;&lt;/li&gt;&lt;li&gt;&quot;</span>)&nbsp;+&nbsp;<span class="string">&quot;&lt;/li&gt;&quot;</span>; &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">document.getElementById(<span class="string">&quot;someUL&quot;</span>).innerHTML(liststring);&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    这是在JavaScript创建重复HTML最快最简单的方法，无需使用模板库或框架。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    <strong>2.不一致的变量名和函数名</strong>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    这个问题是非常重要的，尤其当你在别人的代码上工作时，一定要保持标识符（变量名和函数名）一致，例如下面这段代码：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">var</span>&nbsp;foo&nbsp;=&nbsp;<span class="string">&quot;bar&quot;</span>; &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">var</span>&nbsp;plant&nbsp;=&nbsp;<span class="string">&quot;green&quot;</span>; &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">var</span>&nbsp;car&nbsp;=&nbsp;<span class="string">&quot;red&quot;</span>;&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    通常，人们并不会设置变量名叫Something，这涉及到命名规则问题，命名应清晰明了，一目了然。很多编程语言地变量命名都使用大写。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    下面是对函数的命名：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">function</span>&nbsp;subtractFive(number){ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;number&nbsp;-&nbsp;5; &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    语法结构清晰并且能起到解释性功能。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    例如想要对给定的数字加5，仍采用上述命名模式，比如：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">function</span>&nbsp;addFive(number){ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;number&nbsp;+&nbsp;5; &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    有时，你会根据返回值命名，例如该函数要返回一个HTML字符串，那么可以命名为getTweetHTML()，如果函数只是做一些操作，无需返回值，那么可以在前面加一个do前缀。例如doFetchTweets()。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    构造函数通常会遵循类原则，大写第一个字母：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">function</span>&nbsp;Dog(color){ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.color&nbsp;=&nbsp;color; &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    命名应带有描述性，比如操作型的函数在前面加do，另外要具备可读性和提示性。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    <strong>3.在for...Loops中使用hasOwnProperty()方法</strong>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    JavaScript数组是没有关联的，可以把它当做哈希表，使用循环来遍历对象属性：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">for</span>&nbsp;(<span class="keyword">var</span>&nbsp;prop&nbsp;<span class="keyword">in</span>&nbsp;someObject)&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;alert(someObject[prop]);&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;alert's&nbsp;value&nbsp;of&nbsp;property </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    然而，存在的问题是for...in loop是在对象属性链上遍历每个枚举类型的属性，如果你只想使用对象实际拥有的属性，这可能有问题的。那怎么解决呢?你可以使用hasOwnProperty()方法。代码如下：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">for</span>&nbsp;(<span class="keyword">var</span>&nbsp;prop&nbsp;<span class="keyword">in</span>&nbsp;someObject)&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(someObject.hasOwnProperty(prop))&nbsp;{ &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(someObject[prop]);&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;alert's&nbsp;value&nbsp;of&nbsp;property </span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    <strong>4.比较布尔值</strong>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    把布尔值作为条件进行比较，其实这是在浪费电脑的计算时间。看下面这个例子吧：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">if</span>&nbsp;(foo&nbsp;==&nbsp;<span class="keyword">true</span>)&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;do&nbsp;something&nbsp;for&nbsp;true </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;<span class="keyword">else</span>&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;do&nbsp;something&nbsp;for&nbsp;false </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    其实foo==true这个比较完全是多余的，因为foo已经是布尔类型。直接这样写就行：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">if</span>&nbsp;(foo)&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;do&nbsp;something&nbsp;for&nbsp;true </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;<span class="keyword">else</span>&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;do&nbsp;something&nbsp;for&nbsp;false </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    又或者这样写：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="keyword">if</span>&nbsp;(!foo)&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;do&nbsp;something&nbsp;if&nbsp;foo&nbsp;is&nbsp;false </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;<span class="keyword">else</span>&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0,130,0)">//&nbsp;do&nbsp;something&nbsp;if&nbsp;foo&nbsp;is&nbsp;true </span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">}&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    <strong>5.事件绑定</strong>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    在JavaScript中，事件是个复杂的问题。事件冒泡（event bubbling）和委托正在取代内联事件（inline onclick）操作（一些特殊的“初始页”除外）。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    假设你有一个图片网格，需要启动一个modal lightbox窗口。千万不要采取下面的做法，示例采用的是jQuery，如果你使用相似的库或者其他，冒泡机制也同样适合传统的JavaScript。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    相关的HTML代码：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-xml" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">div</span>&nbsp;<span class="attribute">id</span>=<span class="attribute-value">&quot;grid-container&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;<span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">a</span>&nbsp;<span class="attribute">href</span>=<span class="attribute-value">&quot;someimage.jpg&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span><span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">img</span>&nbsp;<span class="attribute">src</span>=<span class="attribute-value">&quot;someimage-thumb.jpg&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span><span class="tag" style="margin:0px 0px 30px">&lt;/</span><span class="tag-name">a</span><span class="tag" style="margin:0px 0px 30px">&gt;</span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">&nbsp;&nbsp;&nbsp;<span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">a</span>&nbsp;<span class="attribute">href</span>=<span class="attribute-value">&quot;someimage.jpg&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span><span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">img</span>&nbsp;<span class="attribute">src</span>=<span class="attribute-value">&quot;someimage-thumb.jpg&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span><span class="tag" style="margin:0px 0px 30px">&lt;/</span><span class="tag-name">a</span><span class="tag" style="margin:0px 0px 30px">&gt;</span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;<span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">a</span>&nbsp;<span class="attribute">href</span>=<span class="attribute-value">&quot;someimage.jpg&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span><span class="tag" style="margin:0px 0px 30px">&lt;</span><span class="tag-name">img</span>&nbsp;<span class="attribute">src</span>=<span class="attribute-value">&quot;someimage-thumb.jpg&quot;</span><span class="tag" style="margin:0px 0px 30px">&gt;</span><span class="tag" style="margin:0px 0px 30px">&lt;/</span><span class="tag-name">a</span><span class="tag" style="margin:0px 0px 30px">&gt;</span>&nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">&nbsp;&nbsp;&nbsp;... &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="tag" style="margin:0px 0px 30px">&lt;/</span><span class="tag-name">div</span><span class="tag" style="margin:0px 0px 30px">&gt;</span>&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    不好的JavaScript写法：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">$(<span class="string">'a'</span>).on(<span class="string">'click'</span>,&nbsp;<span class="keyword">function</span>()&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;callLightbox(<span class="keyword">this</span>); &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">});&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    这段代码假设调用lightbox，里面传递一个anchor元素并且引用全屏图片。与其绑定每个anchor元素还不如直接使用#grid-container元素。
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">$(<span class="string">&quot;#grid-container&quot;</span>).on(<span class="string">&quot;click&quot;</span>,&nbsp;<span class="string">&quot;a&quot;</span>,&nbsp;<span class="keyword">function</span>(event)&nbsp;{ &nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)">&nbsp;&nbsp;&nbsp;callLightbox(event.target); &nbsp;</li><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit">});&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    在这段代码中，this和event.target都表示anchor元素。同样你也可以在任何父元素上使用。只要保证所定义的元素是事件目标就行（event's target）。
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    <strong>6.避免三元冗余</strong>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    在JavaScript和PHP中，过度使用三元语句是很常见的事情：
</p>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="comment" style="color:rgb(0,130,0)">//&nbsp;javascript </span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">return</span>&nbsp;foo.toString()&nbsp;!==&nbsp;<span class="string">&quot;&quot;</span>&nbsp;?&nbsp;<span class="keyword">true</span>&nbsp;:&nbsp;<span class="keyword">false</span>;&nbsp;</li></ol></pre>
<pre style="margin-top:0px; margin-bottom:1em; padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; background-color:rgb(247,247,247); white-space:pre-wrap; color:rgb(51,51,51); font-size:14px; line-height:24px"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="comment" style="color:rgb(0,130,0)">//&nbsp;php </span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">return</span>&nbsp;(something())&nbsp;?&nbsp;true&nbsp;:&nbsp;false;&nbsp;</li></ol></pre>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    条件判断的返回值永远只有false和true，言外之意就是你无需把true和false显示添加到三元运算中。相反，你只需简单的返回条件：
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
</p>
<pre style="margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; white-space:pre-wrap"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:inherit"><span class="comment" style="color:rgb(0,130,0)">//&nbsp;javascript </span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">return</span>&nbsp;foo.toString()&nbsp;!==&nbsp;<span class="string">&quot;&quot;</span>;&nbsp;</li></ol></pre>
<pre style="margin-top:0px; margin-bottom:1em; background-color:rgb(247,247,247); padding:0px; list-style:none; width:613.7833251953125px; overflow:hidden; white-space:pre-wrap"><ol class="dp-c" style="margin:0px 0px 1px 3em; padding:5px 0px; list-style-position:initial; border-left-width:3px; border-left-style:solid; border-left-color:rgb(20,107,0)"><li class="alt" style="color:inherit; margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255)"><span class="comment" style="color:rgb(0,130,0)">//&nbsp;php </span>&nbsp;</li><li style="margin:0px; padding:0px 3px 0px 10px; list-style:decimal; background-color:rgb(255,255,255); color:rgb(92,92,92)"><span class="keyword">return</span>&nbsp;something();&nbsp;</li><li></li></ol></pre>
<p>
</p>
<p style="margin-top:0px; margin-bottom:1.5em; padding-top:0px; padding-bottom:0px; list-style:none; color:rgb(51,51,51); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:24px">
    Thanks:&nbsp;http://www.csdn.net/article/2012-11-19/2811978-20-All-Too-Common-Coding-Pitfalls-For-Be
</p>