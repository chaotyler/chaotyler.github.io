---
layout: post
title: JavaScript标签中的defer和async
---
<h2 id="legend" style="font-weight:300; margin-top:3em; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif">
<br />

</h2>
<img src="http://www.growingwiththeweb.com/images/2014/02/26/legend.svg" alt="" style="width:300px" />
<div class="clear" style="clear:both; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:20px; line-height:32px">
</div>
<h2 id="script" style="font-weight:300; margin-top:3em; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif">
<code style="font-family:Courier,monospace">&lt;script&gt;</code>
</h2>
<p style="margin-top:0.8em; margin-bottom:0px; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:20px; line-height:32px">
Let’s start by defining what&nbsp;<code style="font-family:Courier,monospace">&lt;script&gt;</code>&nbsp;without any attributes does. The HTML file will be parsed until the script file is hit, at that point parsing will stop and a request will be made to fetch the file (if it’s external). The script will then be executed before parsing is resumed.
</p>
<img src="http://www.growingwiththeweb.com/images/2014/02/26/script.svg" alt="" style="width:1000px; margin-top:0.8em" />
<h2 id="script-async" style="font-weight:300; margin-top:3em; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif">
<code style="font-family:Courier,monospace">&lt;script async&gt;</code>
</h2>
<p style="margin-top:0.8em; margin-bottom:0px; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:20px; line-height:32px">
<code style="font-family:Courier,monospace">async</code>&nbsp;downloads the file during HTML parsing and will pause the HTML parser to execute it when it has finished downloading.
</p>
<img src="http://www.growingwiththeweb.com/images/2014/02/26/script-async.svg" alt="" style="width:1000px; margin-top:0.8em" />
<h2 id="script-defer" style="font-weight:300; margin-top:3em; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif">
<code style="font-family:Courier,monospace">&lt;script defer&gt;</code>
</h2>
<p style="margin-top:0.8em; margin-bottom:0px; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:20px; line-height:32px">
<code style="font-family:Courier,monospace">defer</code>&nbsp;downloads the file during HTML parsing and will only execute it after the parser has completed.&nbsp;<code style="font-family:Courier,monospace">defer</code>&nbsp;scripts are also guarenteed to execute in the order that they appear in the document.
</p>
<img src="http://www.growingwiththeweb.com/images/2014/02/26/script-defer.svg" alt="" style="width:1000px; margin-top:0.8em" />
<h2 id="when-should-i-use-what" style="font-weight:300; margin-top:3em; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif">
When should I use what?
</h2>
<p style="margin-top:0.8em; margin-bottom:0px; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:20px; line-height:32px">
Typically you want to use&nbsp;<code style="font-family:Courier,monospace">async</code>&nbsp;where possible, then&nbsp;<code style="font-family:Courier,monospace">defer</code>&nbsp;then no attribute. Here are some general rules to follow:
        </p>
<ul style="padding:0px 0px 0px 2em; color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:20px; line-height:32px">
<li style="">
If the script is modular and does not rely on any scripts then use&nbsp;<code style="font-family:Courier,monospace">async</code>.
</li>
<li style="">
If the script relies upon or is relied upon by another script then use<code style="font-family:Courier,monospace">defer</code>.
</li>
<li style="">
If the script is small and is relied upon by an&nbsp;<code style="font-family:Courier,monospace">async</code>&nbsp;script then use an inline&nbsp;<code style="font-family:Courier,monospace">script</code>&nbsp;with no attributes placed&nbsp;<span style="">above</span>&nbsp;the&nbsp;<code style="font-family:Courier,monospace">async</code>&nbsp;scripts.
</li>
</ul>
<div>
<p style="margin-top:3em">
<span style="font-weight:normal"><span style="font-size:18px">Thanks:<br />
</span></span><span style="font-weight:normal"><span style="font-size:18px">http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/<br />
</span></span><span style="font-weight:normal"><span style="font-size:18px">http://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html</span></span>
</p>
</div>
<div>
<span style="color:rgb(30,30,56); font-family:'Open Sans',Helvetica,Arial,sans-serif; font-size:12px"><br />
</span>
</div>