---
layout: page
title: javascript知识点之onload和jquery方法ready()的区别
---
<p>
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">大多数情况下，</span><span style="font-family:宋体"><span style="font-size:14px; line-height:24px">jQuery</span></span><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">代码的编写，都要求我们将jquery的代码放在</span>
</p>
<p>
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">$(document).ready(function(){</span>
</p>
<p>
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">&nbsp; &nbsp; &nbsp; ........jquery代码...........</span>
</p>
<p>
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">});<br />
	</span>
</p>
<p>
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">上面的代码和</span><br />
	</span>
</p>
<p>
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">$().ready(function(){<br />
	&nbsp; &nbsp; &nbsp; ........jquery代码...........<br />
	});<br />
	</span></span>
</p>
<p>
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">$(function(){<br />
	&nbsp; &nbsp; &nbsp; ........jquery代码...........<br />
	});<br />
	</span></span>
</p>
<p>
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">是等同的。</span><br />
	</span></span>
</p>
<p>
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="border:0px; margin:0px; padding:0px; vertical-align:baseline; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><strong>注意：</strong></span><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">有时候我们自己编写的jquery代码出现莫名其妙的问题，看似正常的代码，但是就是在运行的时候出错了，那么请先检查一下你的代码有没有放在$(document).ready()方法中运行。</span><br />
	</span></span></span>
</p>
<p>
</p>
<p style="border:0px; margin-top:0px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; vertical-align:baseline; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">
    接下来我们来说说$(document).ready()方法和window.onload方法的区别：<br />
    他们的主要的区别有两点：
</p>
<ol style="border:0px; margin:0px 0px 24px 1.5em; padding:0px; vertical-align:baseline; list-style-position:initial; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">
    <li style="background-color:transparent; border:0px; margin:0px; padding:0px; vertical-align:baseline">
        <span style="background-color:transparent; border:0px; margin:0px; padding:0px; vertical-align:baseline">执行时机</span><br />
        window.onload方法是在网页中的所有的元素（包括元素的所有关联文件）都完全加载到浏览器之后才执行。而通过jQuery中的$(document).ready()方法注册的事件处理程序，只要在DOM完全就绪时，就可以调用了，比如一张图片只要&lt;img&gt;标签完成，不用等这个图片加载完成，就可以设置图片的宽高的属性或样式等。
    </li>
    <li style="background-color:transparent; border:0px; margin:0px; padding:0px; vertical-align:baseline">
        <span style="background-color:transparent; border:0px; margin:0px; padding:0px; vertical-align:baseline">$(document).ready()方法可以多次使用而注册不同的事件处理程序，而window.onload一次只能保存对一个函数的引用，多次绑定函数只会覆盖前面的函数。</span><br />
        先来看window.onload方法在一个页面上注册两次会是什么样的结果：
    </li>
</ol>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
    function one(){<br />
    <span style="white-space:pre"></span>alert(&quot;one&quot;);<br />
    }<br />
    function two(){<br />
    <span style="white-space:pre"></span>alert(&quot;two&quot;);<br />
    }<br />
    window.onload = two ;<br />
    window.onload = one ;<br />

</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">上面的代码运行后，会弹出“one”。</span><br />

</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">再来看看$(document).ready()方法分两次调用会是什么结果。</span><br />
	</span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">function one(){<br />
	<span style="white-space:pre"></span>alert(&quot;one&quot;);<br />
	}<br />
	function two(){<br />
	<span style="white-space:pre"></span>alert(&quot;two&quot;);<br />
	}<br />
	$(document).ready(function(){<br />
	<span style="white-space:pre"></span>one();<br />
	});<br />
	$(document).ready(function(){<br />
	<span style="white-space:pre"></span>two();<br />
	});<br />
	</span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">上面的代码运行后，会分别弹出“one”和“two”。</span></span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><br />
	</span></span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px">另外注意：</span></span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"></span></span></span>
    <p style="margin:5px auto; font-family:verdana; line-height:21px">
        最近在改一个嵌入在frame中的页面的时候，使用了jquery做效果，而页面本身也绑定了onload事件。改完后，Firefox下测试正常流畅，IE下就要等个十几秒jquery的效果才出现，黄花菜都凉了。
    </p>
    <p style="margin:5px auto; font-family:verdana; line-height:21px">
        　　起初以为是和本身onload加载的方法冲突。网上普遍的说法是$(document).ready()是在页面DOM解析完成后执行，而onload事件是在所有资源都准备完成之后才执行，也就是说$(document).ready()是要在onload之前执行的，尤其当页面图片较大较多的时候，这个时间差可能更大。可是我这页面分明是图片都显示出来十几秒了，还不见jquery的效果出来。
    </p>
    <p style="margin:5px auto; font-family:verdana; line-height:21px">
        　　删了onload加载的方法试试，结果还是一样，看来没有必要把原本的onload事件绑定也改用$(document).ready()来写。那是什么原因使得Firefox正常而IE就能呢？接着调试，发现IE下原来绑定的onload方法竟然先于$(document).ready()的内容执行，而Firefox则是先执行$(document).ready()的内容，再执行原来的onload方法。这个和网上的说法似乎不完全一致啊，呵呵，有点意思，好像越来越接近真相了。
    </p>
    <p style="margin:5px auto; font-family:verdana; line-height:21px">
        　　翻翻jquery的源码看看$(document).ready()是如何实现的吧：
    </p>
    if ( jQuery.browser.msie &amp;&amp; window == top ) (function(){&nbsp;<br />
    &nbsp; &nbsp; &nbsp;if (jQuery.isReady) return;&nbsp;<br />
    &nbsp; &nbsp; &nbsp;try {&nbsp;<br />
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.documentElement.doScroll(&quot;left&quot;);&nbsp;<br />
    &nbsp; &nbsp; &nbsp; &nbsp;} catch( error ) {&nbsp;<br />
    &nbsp;　　　　　　setTimeout( arguments.callee, 0 );&nbsp;<br />
    &nbsp;　　　　　　 return;&nbsp;<br />
    &nbsp;　　　　}&nbsp;<br />
    &nbsp;　　 // and execute any waiting functions&nbsp;<br />
    &nbsp;　　　jQuery.ready();&nbsp;<br />
    &nbsp;})();&nbsp;&nbsp;<br />
    &nbsp;……&nbsp;<br />
    &nbsp;jQuery.event.add( window, &quot;load&quot;, jQuery.ready );<br />

</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><br />
	</span></span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
    <span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="font-family:verdana; line-height:21px">结果很明了了，IE只有在页面不是嵌入frame中的情况下才和Firefox等一样，先执行$(document).ready()的内容，再执行原来的onload方法。对于嵌入frame中的页面，也只是绑定在load事件上执行，所以自然是在原来的onload绑定的方法执行之后才轮到。而这个页面中正好在测试环境下有一个访问不到的资源，那十几秒的延迟正是它放大出的时间差。</span></span></span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px; font-family:宋体; line-height:24px">
	<span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:24px"><span style="font-family:verdana; line-height:21px"><br />
	</span></span></span></span>
</div>
<div style="color:rgb(51,51,51); font-size:14px">
    <span style="color:rgb(51,51,51); font-size:14px"><span style="color:rgb(51,51,51); font-size:14px"><span style="color:rgb(51,51,51); font-size:14px; line-height:24px"><span style="font-family:宋体">Thanks：</span></span></span></span>
</div>
<div>
    <a href="http://www.skygq.com/2011/02/07/jquery-document-ready-and-windo-onload/">http://www.skygq.com/2011/02/07/jquery-document-ready-and-windo-onload/</a><span style="font-family:宋体"></span>
</div>
<div>
    <a href="http://www.cnblogs.com/joycel/archive/2010/05/26/1744194.html">http://www.cnblogs.com/joycel/archive/2010/05/26/1744194.html</a><br />

</div>