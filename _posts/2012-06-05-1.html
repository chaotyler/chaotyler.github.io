---
layout: page
title: JavaScript中String和JSON之间的转换
---
<p>
</p>
<p id="best-answer-content" class="reply-text mb10">
    <span style="color:#CC0000"><span style="background-color:rgb(255,255,255)"><span style="font-size:14px">w3c标准的浏览器(如火狐、chrome等)是有一个对象JSON（注意是大写）专门用来处理json的。这个对象有两个函数：</span></span></span>
</p>
<p class="reply-text mb10">
    <span style="color:#CC0000"><span style="background-color:rgb(255,255,255)"><span style="font-size:14px">JSON.parse(text) //用于解析json;</span></span></span>
</p>
<p class="reply-text mb10">
    <span style="color:#CC0000"><span style="background-color:rgb(255,255,255)"><span style="font-size:14px">JSON.stringify(object) //用于生成json格式;</span></span></span>
</p>
<p class="reply-text mb10">
    <span style="color:#CC0000"><span style="background-color:rgb(255,255,255)"><span style="font-size:14px">早期的IE版本没有这个对象，可以去json的官方网站自行下载json2.js对付早期IE版本<a href="http://www.JSON.org/json2.js" target="_blank">http://www.JSON.org</a></span></span></span>
</p>
<br />

<p>
</p>
<p>
    下面是之前的一些方法，现在可以弃用了<br />

</p>
<p>
    1.旧方法
</p>
<p>
    function strToJson(str){&nbsp;
</p>
var json = eval('(' + str + ')');&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
return json;&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />

<p>
    }&nbsp;
</p>
<p>
    2.常用
</p>
<p>
    function strToJson(str){&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    return (new Function(&quot;return &quot; + str))();&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    }&nbsp;<br />

</p>
<p>
    3.IE不支持的方法
</p>
<p>
    function strToJson(str){&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    return JSON.parse(str);&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    }&nbsp;<br />

</p>
<p>
    4.jQuery方法
</p>
<p>
    parseJSON: function( data ) {&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    if ( typeof data !== &quot;string&quot; || !data ) {&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    return null;&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    }&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    data = jQuery.trim( data );&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    if ( /^[\],:{}\s]*$/.test(data.replace(/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g, &quot;@&quot;)&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    .replace(/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, &quot;]&quot;)&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    .replace(/(?:^|:|,)(?:\s*\[)+/g, &quot;&quot;)) ) {&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    return window.JSON &amp;&amp; window.JSON.parse ?&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    window.JSON.parse( data ) :&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    (new Function(&quot;return &quot; + data))();&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    } else {&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    jQuery.error( &quot;Invalid JSON: &quot; + data );&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    }&nbsp;<br style="padding:0px; margin:0px; color:rgb(51,51,51); font-family:Arial,Tahoma,Verdana,sans-serif; font-size:14px; line-height:25px; text-align:left" />
    },&nbsp;<br />

</p>